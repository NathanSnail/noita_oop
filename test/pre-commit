#!/bin/sh
luajit test/oop_test.lua
stylua -c $(find . -type f | rg \.lua$)
bad=false
for file in $(find src -type f | rg \.lua$);
do
	first=$(head -n 1 < $file)
	if [ "$first" != "local require = require" ]; then
		echo "\033[31;1m$file\033[0m"
		bad=true
	fi
done
if [ "$bad" != false ]; then
	exit 1
fi
